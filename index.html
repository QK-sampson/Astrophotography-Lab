<!doctype html>
<html>
  <head>
    <link rel="shortcut icon" href="favicon.ico">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Astrophotography Lab by oaltais</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    
      ga('create', 'UA-65621466-1', 'auto');
      ga('send', 'pageview');
    
    </script>  
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Astrophotography Lab</h1>
        <p>A program for experimenting with signal and noise in astrophotography</p>

        <ul>
          <li><a href="https://github.com/oaltais/aplab/releases/tag/v0.1.0-win">Download for <strong>Windows</strong></a></li>
          <li><a href="https://github.com/oaltais/aplab/zipball/master">Download <strong>Source code</strong></a></li>
          <li><a href="https://github.com/oaltais/aplab">View on <strong>GitHub</strong></a></li>
        </ul>
        
        <img src="aplab_icon.png"/>
        
      </header>
      <section>
        <h3>
<a id="description" class="anchor" href="#description" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h3>

<p>The goal of Astrophotography Lab is to provide insight into the way camera settings and imaging conditions affect the signal and noise in your astronomical images.</p>

<p>The program consists of 4 main tools:</p>

<ol>
<li><p>An analyzer tool that can be used to extract information from your raw images, and calculate sensor characteristics like gain and read noise.</p></li>
<li><p>A calculator that uses information from your image to calculate useful values like signal-to-noise ratio and dynamic range.</p></li>
<li><p>A simulator tool that creates a synthetic image based on imaging parameters provided by the user.</p></li>
<li><p>A plotting tool that gives a graphical representation of how various imaging parameters affect the image quality.</p></li>
</ol>

<p>The tools are connected, allowing you to transfer information between them, and easily go all the way from measuring your camera's sensor to finding the optimal settings for your next imaging session.</p>

<br />
<h3>
<a id="features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h3>

<ul>
<li>Automatic calculation of the sensor characteristics of you camera</li>
<li>Calculation of SNR, skyglow etc. by selecting areas of an image</li>
<li>Included sensor data for a wide range of CCD and DSLR cameras</li>
<li>Tooltips explaining the various imaging parameters and calculated values</li>
</ul>

<br />
<h3>
<a id="screenshots" class="anchor" href="#screenshots" aria-hidden="true"><span class="octicon octicon-link"></span></a>Screenshots</h3>

<figure>
    <a href="screenshots/aplab-image_analyzer.png">
    <img src="screenshots/aplab-image_analyzer.png"/>
    </a>
    <figcaption>The Image Analyzer used to measure background noise</figcaption>
</figure>
<p></p><p></p>
<figure>
    <a href="screenshots/aplab-image_simulator.png">
    <img src="screenshots/aplab-image_simulator.png"/>
    </a>
    <figcaption>The Image Simulator showing a synthetic image</figcaption>
</figure>
<p></p><p></p>
<figure>
    <a href="screenshots/aplab-plotting_tool.png">
    <img src="screenshots/aplab-plotting_tool.png"/>
    </a>
    <figcaption>The Plotting Tool showing how SNR changes with sky darkness</figcaption>
</figure>
<p></p><p></p>
<figure>
    <a href="screenshots/aplab-snr_calculator.png">
    <img src="screenshots/aplab-snr_calculator.png"/>
    </a>
    <figcaption>The SNR Calculator showing calculated image information</figcaption>
</figure>

<br />
<h3>
<a id="howto1" class="anchor" href="#howto1" aria-hidden="true"><span class="octicon octicon-link"></span></a>How to calculate sensor data</h3>

<ul>
<li><p>If you use a DSLR, decide which ISO value you want the data calculated for. Use this ISO for all test images. Make sure the camera is set to save the images in RAW format.</p></li>
<li><p>If you use a CCD, keep settings like binning and read rate the same for all test images.</p></li>
<li><p>Take the following test images with your camera:</p>
<ol>
<li><p>Two bias frames: The sensor should be covered and the exposure time should be as short as possible.</p></li>
<li><p>Two flat frames: Image an evenly illuminated white surface. The histogram peak should be about half the way to the right, and the exposure time shouldn't exceed a few seconds unless the camera is cooled.</p></li>
<li><p>One saturated frame: Image something bright, and make sure some part of the image contains completely saturated pixels.</p></li>
</ol>
</li>
<li><p>Start APLab and add the frames you just captured in the Image Analyzer tool.</p></li>
<li><p>Click the "Compute sensor data" button, and the calculated values will be displayed. You can now save this information to use with the other tools.</p></li>
</ul>

<br />
<h3>
<a id="howto2" class="anchor" href="#howto2" aria-hidden="true"><span class="octicon octicon-link"></span></a>How to get image data for the SNR Calculator</h3>

<p>The Image Analyzer tool allows you to extract from your light and dark frames all the information required by the SNR Calculator. Here is how to do it:</p>
<p><b>From a light frame:</b></p>
<ol>
<li><p>Add the light frame you want to use in the Image Analyzer.</p></li>
<li><p>Left-click and drag to draw a selection box over a background part of the image. The mouse pointer needs to be in the "Select" mode. (Change mode by right-clicking in the image and choosing the mode in the menu.)</p></li>
<li><p>Make the box as large as you can without including any stars. If there are very many stars, make sure it contains as few as possible without being too small.</p></li>
<li><p>Right-click anywhere in the image and select "Transfer to SNR Calculator". When asked which image region you have selected, choose "Background".</p></li>
<li><p>In the next window, select your camera, or just click "OK" if it has already been selected. The data from the selected region has now been copied to the input boxes of the SNR Calculator.</p></li>
<li><p>Next, you need to draw a new selection box over a small region of the target. This will be the part of the target that the calculated SNR and target flux will apply to.</p></li>
<li><p>Right-click in the image again and select "Transfer to SNR Calculator". This time choose "Target" in the window that pops up.</p></li>
<li><p>In the following window, check that your camera is the active one. The target level has now been copied to the corresponding input box in the SNR Calculator.</p></li>
</ol>
<p><b>From one or two dark frames:</b></p>
<p>You have the option to use either one or two dark frames. If you use two, one of them can be subtracted from the other to remove static features like hot pixels. This will be done automatically for DSLR cameras to get better noise measurements.</p>
<ol>
<li><p>If you use a DSLR and only one dark frame, you should draw a selection box over a part of the image containing few hot pixels. Otherwise you shouldn't draw a selection box.</p></li>
<li><p>Right-click anywhere in the image and select "Transfer to SNR Calculator".</p></li>
<li><p>In the window that pops up, select your camera, or just click "OK" if it has already been selected. The data from the dark frame has now been copied to the corresponding input boxes in the SNR Calculator.</p></li>
</ol>

<br />
<h3>
<a id="reliable" class="anchor" href="#reliable" aria-hidden="true"><span class="octicon octicon-link"></span></a>How reliable are the results?</h3>

<p>The calculations of sensor data rely on accurate measurements of photon noise in a flat frame. The noise measurements can be affected if the flat frame is not uniform. To prevent this, the program asks for two flat frames, and subtracts one from the other to remove any features in the image.</p>
<p>If for some reason the two images are not equal (maybe a dust spot moved after the first frame was captured), then the subtracted image will not be uniform and the noise measurement will be affected. Keep this in mind when capturing the flat frames.</p>
<p>The results given by the SNR Calculator are only as accurate as the sensor data it uses for the calculations. While the data included in the default camera profiles shouldn't be too far off the correct values, I cannot vouch for its accuracy.</p>
<p>Most of the DSLR data is not directly measured, but derived from other measurements performed by DxO for their <a href="http://www.dxomark.com/">DxOMark site</a>. The CCD data is collected from various manufacturer sites and from other people posting their measurements. On top of this, I have had to make certain assumptions about the black and white levels, simply because there isn't enough data available.</p>
<p>For these reasons, I definitely recommend that you use the Image Analyzer to perform your own measurements on your camera. Capturing the test frames is simple, and you hardly have to leave your chair.</p>
<p>When it comes to DSLRs, there is also the matter of raw frame "cooking". For many (if not all) models, additional processing is being done to the images before they are saved. For at least some Canon models, the images are darkened and the contrast is decreased for long exposure times (as described in <a href="http://www.stark-labs.com/craig/resources/Articles-&-Reviews/CanonLinearity.pdf">this article</a> by Craig Stark).</p>
<p>APLab does <i>not</i> try to compensate for this kind of in-camera processing, because of insufficient knowledge of what is being done to the images. But by using measurements of noise rather than intensity in certain circumstances, the calculations are less sensitive to effects like long exposure darkening.</p>

<br />
<h3>
<a id="toolsused" class="anchor" href="#toolsused" aria-hidden="true"><span class="octicon octicon-link"></span></a>Tools used</h3>

<ul>
<li><a href="https://www.python.org/">Python 2.7</a></li>
<li><a href="http://www.tcl.tk/">Tcl/Tk</a></li>
<li><a href="http://www.numpy.org/">NumPy</a></li>
<li><a href="http://matplotlib.org/">matplotlib</a></li>
<li><a href="http://www.pythonware.com/products/pil/">Python Imaging Library (PIL)</a></li>
<li><a href="http://www.stsci.edu/institute/software_hardware/pyfits">PyFITS</a></li>
<li><a href="https://www.cybercom.net/~dcoffin/dcraw/">dcraw</a></li>
<li><a href="https://github.com/pyinstaller/pyinstaller/wiki">PyInstaller</a></li>
</ul>

<br />
<h3>
<a id="contact" class="anchor" href="#contact" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contact and support</h3>
<p>For questions, comments and suggestions, email me at <a href="mailto:ap_lab@outlook.com">ap_lab@outlook.com</a>.</p>

      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/oaltais">oaltais</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
  
  </body>
</html>
